{% extends "common/layout.html" %}
{% load static %}


{% block content %}

<script>
    PleaseRotateOptions = {
            message: "Güvenli Sürüş 2020",
            subMessage: "Yatay modda kullanımınızı öneriririz. Devam etmek için tıklayınız",
            onlyMobile: true,

    };
    (function(){var PleaseRotate={},currentOrientation=null,isMobile=/Android|iPhone|iPad|iPod|IEMobile|Opera Mini/i.test(navigator.userAgent),init=false;var options={startOnPageLoad:true,onHide:function(){},onShow:function(){},forcePortrait:false,message:"Please Rotate Your Device",subMessage:"(or click to continue)",allowClickBypass:true,onlyMobile:true,zIndex:1e3,iconNode:null};var cssRules=["#pleaserotate-graphic { margin-left: 50px; width: 200px; animation: pleaserotateframes ease 2s; animation-iteration-count: infinite; transform-origin: 50% 50%; -webkit-animation: pleaserotateframes ease 2s; -webkit-animation-iteration-count: infinite; -webkit-transform-origin: 50% 50%; -moz-animation: pleaserotateframes ease 2s; -moz-animation-iteration-count: infinite; -moz-transform-origin: 50% 50%; -ms-animation: pleaserotateframes ease 2s; -ms-animation-iteration-count: infinite; -ms-transform-origin: 50% 50%; }","#pleaserotate-backdrop { background-color: white; top: 0; left: 0; position: fixed; width: 100%; height: 100%; }","#pleaserotate-container { width: 300px; position: absolute; top: 50%; left: 50%; margin-right: -50%; transform: translate(-50%, -50%); -webkit-transform: translate(-50%, -50%); }","#pleaserotate-message { margin-top: 20px; font-size: 1.3em; text-align: center; font-family: Verdana, Geneva, sans-serif; text-transform: uppercase }","#pleaserotate-message small { opacity: .5; display: block; font-size: .6em}"];var cssKeyframeRules=["pleaserotateframes{ 0% { transform:  rotate(0deg) ; -moz-transform:  rotate(0deg) ;-webkit-transform:  rotate(0deg) ;-ms-transform:  rotate(0deg) ;} 49% { transform:  rotate(-90deg) ;-moz-transform:  rotate(-90deg) ;-webkit-transform:  rotate(-90deg) ; -ms-transform:  rotate(-90deg) ;  } 100% { transform:  rotate(90deg) ;-moz-transform:  rotate(-90deg) ;-webkit-transform:  rotate(-90deg) ; -ms-transform:  rotate(-90deg) ;  } }"];function overrideOptions(updates){var prop;for(var prop in updates){options[prop]=updates[prop]}}function setBodyClass(state){if(document.documentElement){document.documentElement.className=document.documentElement.className.replace(/(?:^|\s)pleaserotate-\S*/g,"");document.documentElement.className+=" pleaserotate-"+state}}function addRules(sheet){var i;for(i=0;i<cssRules.length;i++){sheet.insertRule(cssRules[i],0)}sheet.insertRule("#pleaserotate-backdrop { z-index: "+options.zIndex+"}",0);if(options.allowClickBypass){sheet.insertRule("#pleaserotate-backdrop { cursor: pointer }",0)}if(options.forcePortrait){sheet.insertRule("#pleaserotate-backdrop { -webkit-transform-origin: 50% }",0)}for(i=0;i<cssKeyframeRules.length;i++){if(CSSRule.WEBKIT_KEYFRAMES_RULE){sheet.insertRule("@-webkit-keyframes "+cssKeyframeRules[i],0)}else if(CSSRule.MOZ_KEYFRAMES_RULE){sheet.insertRule("@-moz-keyframes "+cssKeyframeRules[i],0)}else if(CSSRule.KEYFRAMES_RULE){sheet.insertRule("@keyframes "+cssKeyframeRules[i],0)}}}function createStyleSheet(){var style=document.createElement("style");style.appendChild(document.createTextNode(""));document.head.insertBefore(style,document.head.firstChild);addRules(style.sheet)}function createElements(){var backdrop=document.createElement("div"),container=document.createElement("div"),message=document.createElement("div"),subMessage=document.createElement("small");backdrop.setAttribute("id","pleaserotate-backdrop");container.setAttribute("id","pleaserotate-container");message.setAttribute("id","pleaserotate-message");backdrop.appendChild(container);if(options.iconNode!==null){container.appendChild(options.iconNode)}else{container.appendChild(createPhoneSVG())}container.appendChild(message);message.appendChild(document.createTextNode(options.message));subMessage.appendChild(document.createTextNode(options.subMessage));message.appendChild(subMessage);document.body.appendChild(backdrop)}function createPhoneSVG(){var svg=document.createElementNS("http://www.w3.org/2000/svg","svg");svg.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink");svg.setAttribute("id","pleaserotate-graphic");svg.setAttribute("viewBox","0 0 250 250");var group=document.createElementNS("http://www.w3.org/2000/svg","g");group.setAttribute("id","pleaserotate-graphic-path");if(options.forcePortrait){group.setAttribute("transform","rotate(-90 125 125)")}var path=document.createElementNS("http://www.w3.org/2000/svg","path");path.setAttribute("d","M190.5,221.3c0,8.3-6.8,15-15,15H80.2c-8.3,0-15-6.8-15-15V28.7c0-8.3,6.8-15,15-15h95.3c8.3,0,15,6.8,15,15V221.3z"+"M74.4,33.5l-0.1,139.2c0,8.3,0,17.9,0,21.5c0,3.6,0,6.9,0,7.3c0,0.5,0.2,0.8,0.4,0.8s7.2,0,15.4,0h75.6c8.3,0,15.1,0,15.2,0"+"s0.2-6.8,0.2-15V33.5c0-2.6-1-5-2.6-6.5c-1.3-1.3-3-2.1-4.9-2.1H81.9c-2.7,0-5,1.6-6.3,4C74.9,30.2,74.4,31.8,74.4,33.5z"+"M127.7,207c-5.4,0-9.8,5.1-9.8,11.3s4.4,11.3,9.8,11.3s9.8-5.1,9.8-11.3S133.2,207,127.7,207z");svg.appendChild(group);group.appendChild(path);return svg}function setVisibility(visible){var backdropElement=document.getElementById("pleaserotate-backdrop");if(visible){if(backdropElement){backdropElement.style["display"]="block"}}else{if(backdropElement){backdropElement.style["display"]="none"}}}function orientationChanged(){var triggerOn=currentOrientation&&!options.forcePortrait||!currentOrientation&&options.forcePortrait,propogate;if(triggerOn){propogate=options.onShow();setBodyClass("showing")}else{propogate=options.onHide();setBodyClass("hiding")}if(propogate!==undefined&&!propogate){return}PleaseRotate.Showing=triggerOn;setVisibility(triggerOn)}function isPortrait(){return window.innerWidth<window.innerHeight}function checkOrientationChange(){if(!isMobile&&options.onlyMobile){if(!init){init=true;setVisibility(false);setBodyClass("hiding");options.onHide()}return}if(currentOrientation!==isPortrait()){currentOrientation=isPortrait();orientationChanged()}}PleaseRotate.start=function(opts){if(!document.body){window.addEventListener("load",PleaseRotate.start.bind(null,opts),false);return}if(opts){overrideOptions(opts)}createStyleSheet();createElements();checkOrientationChange();window.addEventListener("resize",checkOrientationChange,false);if(options.allowClickBypass){document.getElementById("pleaserotate-backdrop").addEventListener("click",function(){var propogate=options.onHide();setBodyClass("hiding");PleaseRotate.Showing=false;if(propogate===undefined||propogate){setVisibility(false)}})}};PleaseRotate.stop=function(){window.removeEventListener("resize",onWindowResize,false)};PleaseRotate.onShow=function(fn){options.onShow=fn;if(init){init=false;currentOrientation=null;checkOrientationChange()}};PleaseRotate.onHide=function(fn){options.onHide=fn;if(init){currentOrientation=null;init=false;checkOrientationChange()}};PleaseRotate.Showing=false;if(typeof define==="function"&&define.amd){setBodyClass("initialized");define(["PleaseRotate"],function(){return PleaseRotate})}else if(typeof exports==="object"){setBodyClass("initialized");module.exports=PleaseRotate}else{setBodyClass("initialized");window.PleaseRotate=PleaseRotate;overrideOptions(window.PleaseRotateOptions);if(options.startOnPageLoad){PleaseRotate.start()}}})();
</script>
<style>
    #pleaserotate-backdrop{
        z-index: 99999;
    }
</style>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

<link href="//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" rel="stylesheet">

<link rel="stylesheet" href="{% static 'css.css'%} ">
<script>
    var kazalar = "{{kazalar|escapejs}}".split(',');
</script>




<div class="kaza-container " style="z-index: 9999;">
    <div class="kaza-header">
        <button class="toggle kaza-btn toggleButton">Yakındaki Kazalar <span id="kazaSayisiSpan"
                class="badge badge-warning">0</span></button>

    </div>
    <div class="kaza-window">
        <ul id="kazalar" style="list-style: none; padding-left: 0;">
        </ul>
    </div>
</div>


<!-- bundan yukarısı silinecek galiba -->
<div class="container main">
    <br><br>
    <h1 style="text-align: center;">Yolculuk Nereye</h1><br>
    <form>

        <div class="row text-center">

            <!-- Location 2 -->

            <div class="col-3 ">
                <button class="button btn1" type="button" onclick="rotayıtemizle();">Sil</button>
            </div>
            <div class="col-6  text-center">
                <input type="text" id="lokasyon-1" style="display:none" name="origin">
                <div class="location-label">
                    <label>Varış: </label>
                </div>
                <div class="location-input">
                    <div class="input-group  mb-3">
                        <input type="text" id="lokasyon-2" class="form-control" name="destination"
                            placeholder="Nereye gitmek istiyorsunuz?">
                    </div>
                </div>
            </div>
            <div class="col-3"><button class="button btn2" type="button" onclick="yolhesapla();">Başlat</button>
            </div>
        </div>


        <!-- Stats table -->
    </form>
    <div id="output" class="result-table text-center"></div>
    <div style="position: relative;">
        <div class="container-map" id="google-map"></div>
        <button style="position: absolute; z-index: 99; width: 50px; height: 50px; bottom: 30px; left: 10px;"
            class="btn btn-lg btn-block btn-light  " onclick="haritakilitle()"><i id="haritaKilitleBtn"
                onMouseOver="this.style.color='black'" style="color: gray;" onMouseOut="this.style.color='gray'"
                class="fa fa-unlock"></i>
        </button>
        <button style="position: absolute; z-index: 99; width: 50px; height: 50px; bottom: 85px; left: 10px;"
            class="btn btn-lg btn-block btn-light  " onclick="trafikgoster()"><i id="trafikGosterBtn"
                onMouseOver="this.style.color='black'" style="color: gray;" onMouseOut="this.style.color='gray'"
                class="fa fa-road"></i>
        </button>
        <button style="position: absolute; z-index: 99; width: 50px; height: 50px; bottom: 140px; left: 10px;"
            class="btn btn-lg btn-block btn-light   " onclick="kameraodakla()"><i id="kamerakilitle"
                onMouseOver="this.style.color='black'" style="color: gray;" onMouseOut="this.style.color='gray'"
                class="fa fa-camera"></i>
        </button>
    </div>
<br><a href="/../anket/anketekle" style="text-decoration: none;"><button class="btn btn-block btn-lg btn-danger"> Bildirim oluştur</button></a><br><br>
    <div style="overflow-y: scroll; width: 100%; height: 300px;">
        <table class="table" style="width: 100%;">
            <thead>
                <tr>
                    <th scope="col">oluşturma Tarihi</th>
                    <th scope="col">sorun</th>
                    <th scope="col">kim tarafından kaynaklı</th>
                    <th scope="col">hangi gurub</th>
                    <th scope="col"></th>
                    <th scope="col"></th>

                </tr>
            </thead>
            <tbody>
                {% for Anket in newAnket %}
                <tr>
                    <th scope="row"><a href="/anket/detay/{{Anket.id}}"> {{Anket.tarih}}</a></th>
                    <td>{{Anket.sorun}}</td>
                    <td>{{Anket.ana_unsur}}</td>
                    <td>{{Anket.benzerlik}}</td>
                    <td><button class="btn btn-warning"
                            onclick="kazaGoster('{{Anket.enlem|escapejs}}', '{{Anket.boylam|escapejs}}')"> Kazayı
                            Göster</button></td>
                </tr>
                {% endfor %}
        </table>
    </div>
</div>


<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAjDCtgyoBK9Qj8Cb6G9AlnhkDJPQw-dGw&libraries=places" type="text/javascript"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js" type="text/javascript"></script>
<script src="{% static 'main.js'%}" type="text/javascript"></script>
{% endblock %}